import DateTime
import discord
from discord.ext import commands
import pandas as pd
import asyncio
import aiohttp

token = ''
polygon_key = ''


intents = discord.Intents.all()
intents.message_content = True

bot = commands.Bot(command_prefix="!", intents=intents)
async def fetch_stock_data195M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/195/minute/1731335400000/1731347100000?adjusted=true&sort=asc&limit=390&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/day/{DateTime.yesterday}/{DateTime.weekdays}?adjusted=true&sort=asc&limit=120&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data2D(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/day/2024-11-08/{DateTime.weekdays}?adjusted=true&sort=asc&limit=120&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data4D(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/4/day/2024-08-15/{DateTime.weekdays}?adjusted=true&sort=asc&limit=&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_dataW(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/week/2024-11-08/{DateTime.weekdays}?adjusted=true&sort=asc&limit=120&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()  
async def fetch_stock_data2W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/week/2024-10-21/{DateTime.weekdays}?adjusted=true&sort=asc&limit=120&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()  
async def fetch_stock_data3W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/3/week/2024-10-21/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()  
async def fetch_stock_data4W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/4/week/2024-10-07/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json() 
async def fetch_stock_data5W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/5/week/2024-10-07/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data6W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/6/week/2024-09-09/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data7W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/7/week/2024-09-03/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()  
async def fetch_stock_data9W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/9/week/2024-09-09/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json() 
async def fetch_stock_dataM(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/month/2024-10-31/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data2M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/month/2024-07-01/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_dataQ(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/quarter/2024-07-01/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data4M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/4/month/2024-05-01/{DateTime.weekdays}?adjusted=true&sort=asc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data6M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/6/month/2024-01-02/{DateTime.weekdays}?adjusted=true&sort=asc&limit=50000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()  
async def fetch_stock_data12M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/year/2023-01-03/{DateTime.weekdays}?adjusted=true&sort=asc&limit=500&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/day/{DateTime.two_days_ago}/{DateTime.weekdays}?adjusted=true&sort=desc&limit=120&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()    
async def fetch_stock_data_hg2D(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/day/2024-11-06/{DateTime.weekdays}?adjusted=true&sort=desc&limit=500&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg4D(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/4/day/2024-08-09/{DateTime.weekdays}?adjusted=true&sort=desc&limit=120&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hgW(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/week/2024-11-01/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg2W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/week/2024-10-07/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg3W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/3/week/2024-09-30/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg4W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/4/week/2024-09-09/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg5W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/5/week/2024-09-03/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg6W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/6/week/2024-07-29/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg7W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/7/week/2024-07-15/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg9W(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/9/week/2024-07-08/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hgM(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/month/2024-09-30/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg2M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/month/2024-05-01/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hgQ(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/quarter/2024-04-01/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg4M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/4/month/2024-01-02/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg6M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/6/month/2023-07-03/{DateTime.weekdays}?adjusted=true&sort=desc&limit=50000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()
async def fetch_stock_data_hg12M(session, ticker):
     url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/year/2022-01-03/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
     async with session.get(url) as response:
          return await response.json()

async def fetch_stock_datapo3(session, ticker, timeframe):
    if timeframe == "daily":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/day/{DateTime.yesterday}/{DateTime.weekdays}?adjusted=true&sort=desc&limit=50&apiKey={polygon_key}'
    elif timeframe == "twoday":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/day/2024-11-08/{DateTime.weekdays}?adjusted=true&sort=desc&limit=500&apiKey={polygon_key}'
    elif timeframe == "weekly":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/week/2024-11-08/{DateTime.weekdays}?adjusted=true&sort=desc&limit=500&apiKey={polygon_key}'
    elif timeframe == "twoweek":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/2/week/2024-10-07/{DateTime.weekdays}?adjusted=true&sort=desc&limit=500&apiKey={polygon_key}'
    elif timeframe == "monthly":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/month/2024-10-31/{DateTime.weekdays}?adjusted=true&sort=desc&limit=500&apiKey={polygon_key}'
    elif timeframe == "quarterly":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/quarter/2024-07-01/{DateTime.weekdays}?adjusted=true&sort=desc&limit=5000&apiKey={polygon_key}'
    elif timeframe == "six-month":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/6/month/2024-01-02/{DateTime.weekdays}?adjusted=true&sort=asc&limit=50000&apiKey={polygon_key}'
    elif timeframe == "yearly":
        url = f'https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/year/2023-01-03/{DateTime.weekdays}?adjusted=true&sort=asc&limit=500&apiKey={polygon_key}'
    async with session.get(url) as response:
        return await response.json()

async def fetch_stock_data_batch(session, tickers, timeframe):
    tasks = [fetch_stock_datapo3(session, ticker, timeframe) for ticker in tickers]
    return await asyncio.gather(*tasks)

def is_inside(candle_1, candle_2):
    # Define the criteria for an inside day
    return (candle_1['h'] < candle_2['h'] and
            candle_1['l'] > candle_2['l'])
def is_outside(candle_1, candle_2):
    # Define the criteria for an outside day
    return (candle_1['h'] > candle_2['h'] and
            candle_1['l'] < candle_2['l'])
def is_22rev (candle_1, candle_2):
     # Define the criteria for a failed 2-Up
    return (candle_1['h'] > candle_2['h'] and candle_1['c'] < candle_1['o'] and candle_1['l'] > candle_2['l']) or (candle_1['l'] < candle_2['l'] and candle_1['c'] > candle_1['o'] and candle_1['h'] < candle_2['h'])
### Holy Grail Candle Criteria ###
def is_holygrail(candle_1, candle_2, candle_3):
     return (candle_1['h'] < candle_2['h'] and
             candle_1['l'] > candle_2['l'] and
             candle_2['h'] > candle_3['h'] and
             candle_2['l'] < candle_3['l'])
def is_holygrail_hybrid(candle_1, candle_2, candle_3):
     return (candle_1['h'] < candle_2['h'] and
             candle_2['l'] > candle_3['l'] and
             candle_2['h'] > candle_3['h'] and
             candle_2['l'] < candle_3['l'])
### Nirvana Candle Criteria ###
def is_nirvana(candle_1, candle_2, candle_3):
     return (candle_1['h'] > candle_2['h'] and
             candle_1['l'] < candle_2['l'] and
             candle_2['h'] < candle_3['h'] and
             candle_2['l'] > candle_3['l'])
# Double Inside Candle Criteria ###
def is_doubleinside(candle_1, candle_2, candle_3):
     return (candle_1['h'] < candle_2['h'] and
             candle_1['l'] > candle_2['l'] and
             candle_2['h'] < candle_3['h'] and
             candle_2['l'] > candle_3['l'])
### Shooter Candle Criteria ###   
def is_shooter(candle_1):
    body = abs(candle_1['c'] - candle_1['o'])
    upper_shadow = candle_1['h'] - max(candle_1['c'], candle_1['o'])
    lower_shadow = min(candle_1['c'], candle_1['o']) - candle_1['l']
    return lower_shadow <= 0.5 * body and upper_shadow >= 2 * body
### Hammer Candle Criteria ###
def is_hammer(candle_1):
    body = abs(candle_1['o'] - candle_1['c'])
    upper_shadow = candle_1['h'] - max(candle_1['o'], candle_1['c'])
    lower_shadow = min(candle_1['o'], candle_1['c']) - candle_1['l']
    return lower_shadow >= 2 * body and upper_shadow <= 3 * body
###  Momo Hammer Candle Criteria ###
def is_MoMohammer(candle_1):
    body = abs(candle_1['o'] - candle_1['c'])
    upper_shadow = candle_1['h'] - max(candle_1['o'], candle_1['c'])
    lower_shadow = min(candle_1['o'], candle_1['c']) - candle_1['l']
    return lower_shadow >= 2 * body and upper_shadow <= 0.2 * body
### Doji Criteria ###
def is_doji(candle_1):
    return abs(candle_1['c'] - candle_1['o']) / (candle_1['h'] - candle_1['l']) < 0.1
### Potential Three Criteria ### 
def is_po3 (candle_1, candle_2):
     # Define the criteria for a potential outside day
    return (candle_1['h'] > candle_2['h'] and candle_1['c'] <= ((candle_2['h'] + candle_2['l']) * 0.5) and candle_1['l'] > candle_2['l']) or \
           (candle_1['l'] < candle_2['l'] and candle_1['c'] >= ((candle_2['h'] + candle_2['l']) * 0.5) and candle_1['h'] < candle_2['h'])
### 1-2-2 Rev Strat ###
def is_inside_rev(candle_1, candle_2, candle_3):
    return (candle_2['h'] < candle_3['h'] and candle_2['l'] > candle_3['l'] and candle_1['h'] < candle_2['h'] and candle_1['l'] < candle_2['l'] and candle_1['c'] > candle_1['o']) or (candle_2['h'] < candle_3['h'] and candle_2['l'] > candle_3['l'] and candle_1['h'] > candle_2['h'] and candle_1['l'] > candle_2['l'] and candle_1['c'] < candle_1['o'])
### 3-2-2 Rev Strat ###
def is_outside_rev(candle_1, candle_2, candle_3):
    return (candle_2['h'] > candle_3['h'] and candle_2['l'] < candle_3['l'] and candle_1['h'] > candle_2['h'] and candle_1['l'] > candle_2['l'] and candle_1['c'] < candle_1['o']) or (candle_2['h'] > candle_3['h'] and candle_2['l'] < candle_3['l'] and candle_1['h'] < candle_2['h'] and candle_1['l'] < candle_2['l'] and candle_1['c'] > candle_1['o'])
### Gappers ###
def is_gapper(candle_1, candle_2):
    return (candle_1['o'] > candle_2['h']) or (candle_1['o'] < candle_2['l'])

@bot.event
async def on_ready():
    print('Logged in as {0.user}'.format(bot))

# whitelisted_servers = ['1116121971135090798', '810648362885316608']
# @bot.event
# async def on_message(ctx):
#     # Check if the message is from a whitelisted server
#     if ctx.guild.id in whitelisted_servers:
#         print(f"Server:")

@bot.command()
async def server_info(ctx):
    for guild in bot.guilds:
        print(f"Server: {guild.name}")
        print(f"Members count: {len(guild.members)}") # counts all members
        #for member in guild.members:
            #print(member) # prints all members names one by one

####################################################################################################################################
#                                               Potential Outisde Day                                                              #
####################################################################################################################################

@bot.command()
async def poD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = daily_data['results'][1]
            candle_today = daily_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}  {weekly_color}  {monthly_color}  {quarterly_color}   {tickers}")
                print(tickers)
    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                file = discord.File('bar.gif', filename='bar.gif')
                embed = discord.Embed(title="Potential Outside Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_image(url='attachment://bar.gif')
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(file=file, embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

## Potential Outside Two-Day ##

@bot.command()
async def po2D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        twoday_data_batch = await fetch_stock_data_batch(session, tickers, "twoday")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for twoday_data, weekly_data, monthly_data, quarterly_data, tickers in zip(twoday_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            twoday_candle = twoday_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if twoday_candle['c'] > twoday_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = twoday_data['results'][1]
            candle_today = twoday_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}  {weekly_color}  {monthly_color}  {quarterly_color}   {tickers}")
    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Two-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Two-Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Potential Outside Week ###

@bot.command()
async def poW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = weekly_data['results'][1]
            candle_today = weekly_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color} {weekly_color} {monthly_color} {quarterly_color}   {tickers}")
            print(tickers)

    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Potential Outside Two-Week ###

@bot.command()
async def po2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "twoweek")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = weekly_data['results'][1]
            candle_today = weekly_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color} {weekly_color} {monthly_color} {quarterly_color}   {tickers}")
            print(tickers)

    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Two-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Two-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Potential Outside Month ###

@bot.command()
async def poM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = monthly_data['results'][1]
            candle_today = monthly_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}  {weekly_color}  {monthly_color}  {quarterly_color}   {tickers}")

    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Month Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Potential Outside Quarter ###

@bot.command()
async def poQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = quarterly_data['results'][1]
            candle_today = quarterly_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}  {weekly_color}  {monthly_color}  {quarterly_color}   {tickers}")

    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Quarterly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Quarters Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Potential Outside Six-Month ###

@bot.command()
async def po6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "six-month")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = weekly_data['results'][1]
            candle_today = weekly_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color} {weekly_color} {monthly_color} {quarterly_color}   {tickers}")
            print(tickers)

    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Six-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Six-Month Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Potential Outside Six-Month ###

@bot.command()
async def poY(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")
    red_year = discord.utils.get(ctx.guild.emojis, name="red_y")
    green_year = discord.utils.get(ctx.guild.emojis, name="green_y")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "six-month")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")
        yaerly_data_batch = await fetch_stock_data_batch(session, tickers, "yearly")

    for daily_data, weekly_data, monthly_data, quarterly_data, yearly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, yaerly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]
            yearly_candle = yearly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter
            yearly_color = green_year if yearly_candle ['c'] > yearly_candle ['o'] else red_year

            # Add the ticker with colors to the list
            candle_yesterday = yearly_data['results'][1]
            candle_today = yearly_data['results'][0]
            if is_po3(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color} {weekly_color} {monthly_color} {quarterly_color} {yearly_color}   {tickers}")
            print(tickers)

    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Potential Outside Yearly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Potential Outside Yearly Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

############################################################################################################
#                                     STRAT PATTERNS                                                       #
############################################################################################################

### Inside 195 Minute ###

@bot.command()
async def inside195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            print(ticker)
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside 195 Minute Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside 195 Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)


### Inside Day ###

@bot.command()
async def insideD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = daily_data['results'][1]
            candle_today = daily_data['results'][0]
            if is_inside(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}  {weekly_color}  {monthly_color}  {quarterly_color}   {tickers}")
            print(tickers)
    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### FTFC Inside Day ###

@bot.command()
async def FTFCinsideD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = daily_data['results'][1]
            candle_today = daily_data['results'][0]
            if is_inside(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}  {weekly_color}  {monthly_color}  {quarterly_color}   {tickers}")
            print(tickers)
    def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    # Send the message with the inside day tickers on different timeframes
    long_message = '\n'.join(inside_tickers)
    chunks = split_message(long_message, 4096)
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="FTFC Inside Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No FTFC Inside Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Gapper Daily ###

@bot.command()
async def gapperD (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_gapper(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['o'] > candle_yesterday['c'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Gappers Daily Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Gappers On Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside 195 Minute ###

@bot.command()
async def outside195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if inside_tickers:
        embed = discord.Embed(title="Outside 195 Minute Tickers", description="\n".join(inside_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside 195 Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Day Tickers ###

@bot.command()
async def outsideD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### 2-2 Rev 195 Minute ###

@bot.command()
async def rev195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev 195 Minute Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev 195-Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

####Daily 2-2 Rev####

@bot.command()
async def revD (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Daily Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Tickers ###

@bot.command(name='holygrailD')
async def holygrailD(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAL', 'AAPL', 'ABBV', 'ABNB', 'ABT', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEM', 'AER', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALK', 'ALL', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'ASML', 'ASX', 'AU', 'AVB', 'AVGO', 'AXON', 'AXP', 'AZN', 'AZO', 'AZPN', 'AZUL', 'BA', 'BABA', 'BAC', 'BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BEKE', 'BIDU', 'BIO', 'BIP', 'BJ', 'BK', 'BKNG', 'BMO', 'BMRN', 'BMY', 'BNS', 'BNTX', 'BP', 'BR', 'BRK.B', 'BUD', 'BUG', 'BURL', 'BWA', 'BX', 'BZ', 'C', 'CAG', 'CAH', 'CARR', 'CAT', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CHWY', 'CI', 'CINF', 'CL', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'COF', 'COIN', 'COO', 'COP', 'COST', 'COTY', 'CP', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CRH', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVS', 'CVX', 'CZR', 'D', 'DAL', 'DASH', 'DB', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOCU', 'DOV', 'DOW', 'DOX', 'DPZ', 'DRI', 'DT', 'DTE', 'DUK', 'DVN', 'DXCM', 'E', 'EA', 'EBAY', 'EMR', 'ENB', 'ENPH', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESS', 'ET', 'ETN', 'ETR', 'ETSY', 'EVRG', 'EW', 'EXAS', 'EXC', 'EXPD', 'EXPE', 'EXR', 'F', 'FANG', 'FAST', 'FCX', 'FDS', 'FDX', 'FE', 'FERG', 'FICO', 'FIS', 'FMS', 'FMX', 'FND', 'FNV', 'FOXA', 'FSLR', 'FTNT', 'FTS', 'FTV', 'GD', 'GDDY', 'GDX', 'GE', 'GILD', 'GM', 'GMAB', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSK', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HLT', 'HON', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HSIC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'IBB', 'HUM', 'HWM', 'IBM', 'IGV', 'ILMN', 'IMO', 'INTC', 'INTU', 'INVH', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'ITB', 'IWM', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JETS', 'JHX',  'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEY', 'KEYS', 'KMB', 'KMI', 'KMX', 'KO', 'KOF', 'KR', 'KRE', 'KWEB', 'L', 'LAMR', 'LBRDK', 'LCID', 'LDOS', 'LEGN', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LSCC', 'LULU', 'LUV', 'LVS', 'MA', 'MANH', 'MAR',  'MARA', 'MAS', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MELI', 'MET', 'META', 'MGM', 'MMM', 'MNST', 'MO', 'MOH', 'MOS', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRO', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MU', 'MUFG', 'NBIX', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NIO', 'NKE', 'NMR', 'NOC', 'NOK', 'NOW', 'NSC', 'NUE', 'NVDA', 'NWG', 'NXPI', 'O', 'ODFL', 'OIH', 'OKTA', 'ORCL', 'ORLY', 'OXY', 'PANW', 'PARA', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCTY', 'PDD', 'PEP', 'PFE', 'PFG', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PINS', 'PKG', 'PLD', 'PLTR', 'PM', 'PNC', 'PODD', 'POOL', 'PPG', 'PPL', 'PRU', 'PSA', 'PSX', 'PTC', 'PUK', 'PYPL', 'QCOM', 'QGEN', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBLX', 'RCI', 'RCL', 'RDY', 'REG', 'REGN', 'RELX', 'REXR', 'RF', 'RIO', 'RIOT', 'RIVN', 'RJF', 'RKT', 'RMD', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RSG', 'RTX', 'RY', 'RYAAY', 'RYAN', 'SAN', 'SAP', 'SBAC', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEDG', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIRI', 'SJM', 'SLB', 'SLF', 'SMFG', 'SMH', 'SNA', 'SNAP', 'SNN', 'SNOW', 'SNPS', 'SNY', 'SO', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM', 'SRE', 'SSNC', 'STE', 'STLA', 'STLD', 'SU', 'SUI', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TFC','TFX', 'TGT', 'TJX', 'TLK', 'TM', 'TME', 'TMO', 'TMUS', 'TPL', 'TRGP', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TTWO', 'TXN', 'U', 'UAL', 'UBER', 'UI', 'UL', 'ULTA', 'UMC', 'UNH', 'UNP', 'UPS', 'UPST', 'URI', 'USB', 'V', 'VALE', 'VEEV', 'VICI', 'VIV', 'VLO', 'VNQ', 'VOD', 'VRSK', 'VRSN', 'VRTX', 'VTR', 'VZ', 'WAB', 'WAT', 'WBA', 'WBD', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WFC', 'WLK', 'WM', 'WMB', 'WMG', 'WMT', 'WPC', 'WPM', 'WPP', 'WYNN', 'X', 'XEL', 'XHB', 'XLB', 'XLC', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLRE', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XRT', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZI', 'ZM', 'ZS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Day Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Day Tickers###
            
@bot.command(name='nirvanaD')
async def nirvanaD(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Day Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Days Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Day ####

@bot.command(name='doubleinsideD')
async def doubleinsideD(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Day Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Days Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Tickers ###

@bot.command()
async def inrevD(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 1-2-2Rev Tickers ###

@bot.command()
async def outrevD(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Shooter 195 Minute ###

@bot.command()
async def shooter195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            #candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_shooter(candle_today):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if inside_tickers:
        embed = discord.Embed(title="Shooters 195 Minute Tickers", description="\n".join(inside_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Shooters 195-Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Daily Shooter Candles ###

@bot.command()
async def shooterD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Daily Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Daily Shooter Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Hammer 195 Minute ###

@bot.command()
async def hammer195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            #candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_hammer(candle_today):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if inside_tickers:
        embed = discord.Embed(title="Hammer 195 Minute Tickers", description="\n".join(inside_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Hammer 195-Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### MoMo Hammer 195 Minute ###

@bot.command()
async def momohammer195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            #candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_MoMohammer(candle_today):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if inside_tickers:
        embed = discord.Embed(title="MoMo Hammer 195 Minute Tickers", description="\n".join(inside_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No MoMo Hammer's 195-Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Daily Hammer Candles ###

@bot.command()
async def hammerD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Daily Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Daily Hammer Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Daily MoMo Hammer Candles ###

@bot.command()
async def momohammerD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
    if(hammer_tickers):
        embed = discord.Embed(title="Daily MoMo Hammer Candles", description='\n'.join(hammer_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Daily MoMo Hammer Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Doji 195 Minute ###

@bot.command()
async def doji195M (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data195M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            #candle_yesterday = data['results'][2]
            candle_today = data['results'][1]
            if is_doji(candle_today):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if inside_tickers:
        embed = discord.Embed(title="Doji 195 Minute Tickers", description="\n".join(inside_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Doji 195-Minute Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Daily Doji Candles ###

@bot.command()
async def dojiD(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Daily Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Daily Doji Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Two-Day Tickers ###

@bot.command()
async def inside2D (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Two-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Two-Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Two-Day Tickers ###

@bot.command()
async def outside2D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Two-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Two-Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

####2-2 Rev Two-Day####

@bot.command()
async def rev2D (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Two-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Two-Day Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Two-Day Tickers ###

@bot.command()
async def holygrail2D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Two-Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Two-Day Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Two-Day Tickers###
            
@bot.command()
async def nirvana2D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Two-Day Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Two-Days Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Two-Day ####

@bot.command()
async def doubleinside2D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Two-Day Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Two-Day Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Two-Day Tickers ###

@bot.command()
async def inrev2D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Two-Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Two-Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Two-Day Tickers ###

@bot.command()
async def outrev2D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Two-Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Two-Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Two-Day Shooter Candles ###

@bot.command()
async def shooter2D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Day Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Day Shooter Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Day Hammer Candles ###

@bot.command()
async def hammer2D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Day Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Day Hammer Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Day MoMo Hammer Candles ###

@bot.command()
async def momohammer2D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Day MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Day MoMo Hammer Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Day Doji Candles ###

@bot.command()
async def doji2D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Day Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Day Doji Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Four-Day Tickers ###
red_emote =  '<:redarrow:1116384524138446898>'
green_emote = '<:756335967106891826:1116384717911113799>'

async def get_stock_data(session, ticker):
    # Fetch the last 8 days of data for the ticker from Polygon.io
    url = f"https://api.polygon.io/v2/aggs/ticker/{ticker}/range/1/day/2024-12-11/{DateTime.weekdays}?apiKey={polygon_key}"
    async with session.get(url) as response:
        data = await response.json()
        df = pd.DataFrame(data['results'])
        df['date'] = pd.to_datetime(df['t'], unit='ms')
        df.set_index('date', inplace=True)
        return df

def is_inside_four_day(df):
    # Check for the inside four-day pattern
    results = []
    for i in range(4, len(df)):
        current_day = df.iloc[i]
        previous_four_days = df.iloc[i-4:i]
        if (current_day['h'] < previous_four_days['h'].max()) and (current_day['l'] > previous_four_days['l'].min()):
            results.append(df.index[i])
    return results

async def check_ticker(session, ticker):
    df = await get_stock_data(session, ticker)
    inside_days = is_inside_four_day(df)
    if len(inside_days) >= 3:  # Check if there are 3 or more inside days
        return f"{ticker}"
    return None  # Return None if less than 3 inside days

@bot.command()
async def inside4D(ctx):
    await ctx.send("Processing... Please wait.")
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']  # Example tickers
    async with aiohttp.ClientSession() as session:
        tasks = [check_ticker(session, ticker) for ticker in set(tickers)]
        results = await asyncio.gather(*tasks)

    # Flatten the list of results and join into a single string
    message_contents = '\n'.join(sorted(filter(None, results)))

    # Function to send embeds respecting the maximum description length
    async def send_embeds_in_chunks(contents, max_description_length=4096):
        chunk = ""
        for line in contents.split('\n'):
            if len(chunk) + len(line) > max_description_length:
                embed = discord.Embed(title="Four-Day Inside Candles Detected", description=chunk, color=discord.Color.green())
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
                await ctx.send(embed=embed)
                chunk = line + "\n"
            else:
                chunk += line + "\n"
        if chunk:
            embed = discord.Embed(title="Four-Day Inside Candles Detected", description=chunk, color=discord.Color.green())
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await ctx.send(embed=embed)
    # Send the messages in chunks
    await send_embeds_in_chunks(message_contents)

### Outside Four-Day Tickers ###

@bot.command()
async def outside4D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Four-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Four-Day Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

####2-2 Rev Four-Day####

@bot.command()
async def rev4D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Four-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Four-Day Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Four-Day Tickers ###

@bot.command()
async def holygrail4D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Four-Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Four-Day Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Four-Day Tickers###
            
@bot.command()
async def nirvana4D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)
            return messages

    long_message = '\n'.join(nirvana_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Nirvana Four-Day Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await CTX.send(embed=embed)
    else:
            embed = discord.Embed(title="No Nirvana Four-Days Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Four-Day ####

@bot.command()
async def doubleinside4D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Four-Day Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Four-Day Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Four-Day Tickers ###

@bot.command()
async def inrev4D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Four-Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Four-Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Four-Day Tickers ###

@bot.command()
async def outrev4D(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Four-Day Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Four-Days Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Four-Day Shooter Candles ###

@bot.command()
async def shooter4D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if shooter_tickers:
        embed = discord.Embed(title="Four-Day Shooter Candles", description='\n'.join(shooter_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Day Shooter Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Day Hammer Candles ###

@bot.command()
async def hammer4D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if hammer_tickers:
        embed = discord.Embed(title="Four-Day Hammer Candles", description='\n'.join(hammer_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Day Hammer Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Day MoMo Hammer Candles ###

@bot.command()
async def momohammer4D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if hammer_tickers:
        embed = discord.Embed(title="Four-Day MoMo Hammer Candles", description='\n'.join(hammer_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
        await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Day MoMo Hammer Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Day Doji Candles ###

@bot.command()
async def doji4D(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4D(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if Doji_tickers:
            embed = discord.Embed(title="Four-Day Doji Candles", description='\n'.join(Doji_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
            await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Day Doji Candles Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)


### Inside Week Tickers ###

@bot.command()
async def insideW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = weekly_data['results'][1]
            candle_today = weekly_data['results'][0]
            if is_inside(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}   {weekly_color}  {monthly_color}  {quarterly_color}  {tickers}")
                print(tickers)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)
            return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### FTFC Inside Week Tickers ###

@bot.command()
async def FTFCinsideW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    
    ### Emotes for Open > Close or Open < Close ###
    red_daily = discord.utils.get(ctx.guild.emojis, name="red_d")
    green_daily = discord.utils.get(ctx.guild.emojis, name="green_d")
    red_week = discord.utils.get(ctx.guild.emojis, name="red_w")
    green_week = discord.utils.get(ctx.guild.emojis, name="green_w")
    red_month = discord.utils.get(ctx.guild.emojis, name="red_m")
    green_month = discord.utils.get(ctx.guild.emojis, name="green_m")
    red_quarter = discord.utils.get(ctx.guild.emojis, name="red_q")
    green_quarter = discord.utils.get(ctx.guild.emojis, name="green_q")

    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']
    inside_tickers = []
    async with aiohttp.ClientSession() as session:
        daily_data_batch = await fetch_stock_data_batch(session, tickers, "daily")
        weekly_data_batch = await fetch_stock_data_batch(session, tickers, "weekly")
        monthly_data_batch = await fetch_stock_data_batch(session, tickers, "monthly")
        quarterly_data_batch = await fetch_stock_data_batch(session, tickers, "quarterly")

    for daily_data, weekly_data, monthly_data, quarterly_data, tickers in zip(daily_data_batch, weekly_data_batch, monthly_data_batch, quarterly_data_batch, tickers):
            # Get the latest candle data for each timeframe
            daily_candle = daily_data['results'][0]
            weekly_candle = weekly_data['results'][0]
            monthly_candle = monthly_data['results'][0]
            quarterly_candle = quarterly_data['results'][0]

            # Check the close-open condition for each timeframe
            daily_color = green_daily if daily_candle['c'] > daily_candle['o'] else red_daily
            weekly_color = green_week if weekly_candle['c'] > weekly_candle['o'] else red_week
            monthly_color = green_month if monthly_candle['c'] > monthly_candle['o'] else red_month
            quarterly_color = green_quarter if quarterly_candle ['c'] > quarterly_candle ['o'] else red_quarter

            # Add the ticker with colors to the list
            candle_yesterday = weekly_data['results'][1]
            candle_today = weekly_data['results'][0]
            if is_inside(candle_today, candle_yesterday):
                inside_tickers.append(f"{daily_color}   {weekly_color}  {monthly_color}  {quarterly_color}  {tickers}")
                print(tickers)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)
            return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="FTFC Inside Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No FTFC Inside Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Week Tickers ###

@bot.command()
async def outsideW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

####2-2 Rev Week####

@bot.command()
async def revW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Week Tickers ###

@bot.command()
async def holygrailW(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
            print(tickers)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Week Tickers###
            
@bot.command()
async def nirvanaW(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
            print(tickers)
        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(nirvana_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Nirvana Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
                await CTX.send(embed=embed)
            else:
                embed = discord.Embed(title="No Nirvana Week Tickers Were Detected", color=0xFFEA00)
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
                await CTX.send(embed=embed)

#### Double Inside Week ####

@bot.command()
async def doubleinsideW(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Weekly Tickers ###

@bot.command()
async def inrevW(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Weekly Tickers ###

@bot.command()
async def outrevW(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Weekly Shooter Candles ###

@bot.command()
async def shooterW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Weekly Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Weekly Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Weekly Hammer Candles ###

@bot.command()
async def hammerW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Weekly Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Weekly Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Weekly MoMo Hammer Candles ###

@bot.command()
async def momohammerW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Weekly MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Weekly MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Daily Doji Candles ###

@bot.command()
async def dojiW(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataW(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Weekly Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Weekly Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Two-Week Tickers ###

@bot.command()
async def inside2W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Two-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Two-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Two-Week Tickers ###

@bot.command()
async def outside2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Two-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Two-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Two-Week ####

@bot.command()
async def rev2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Two-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Two-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Two-Week Tickers ###

@bot.command()
async def holygrail2W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Two-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Two-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Two-Week Tickers###
            
@bot.command()
async def nirvana2W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Two-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Two-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Two-Week ####

@bot.command()
async def doubleinside2W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Two-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Two-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Two-Week Tickers ###

@bot.command()
async def inrev2W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Two-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Two-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Two-Week Tickers ###

@bot.command()
async def outrev2W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Two-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Two-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Two-Week Shooter Candles ###

@bot.command()
async def shooter2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Week Hammer Candles ###

@bot.command()
async def hammer2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Week MoMo Hammer Candles ###

@bot.command()
async def momohammer2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Week Doji Candles ###

@bot.command()
async def doji2W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Three-Week Tickers ###

@bot.command()
async def inside3W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Three-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Three-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Three-Week Tickers ###

@bot.command()
async def outside3W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Three-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Three-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2Rev Three-Week ####

@bot.command()
async def rev3W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Three-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2Rev Three-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Three-Week Tickers ###

@bot.command()
async def holygrail3W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Three-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Three-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Three-Week Tickers###
            
@bot.command()
async def nirvana3W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Three-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Three-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Three-Week ####

@bot.command()
async def doubleinside3W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Three-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Three-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Three-Week Tickers ###

@bot.command()
async def inrev3W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Three-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Three-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Three-Week Tickers ###

@bot.command()
async def outrev3W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Three-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Three-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Three-Week Shooter Candles ###

@bot.command()
async def shooter3W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Three-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Three-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Three-Week Hammer Candles ###

@bot.command()
async def hammer3W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Three-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Three-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Three-Week MoMo Hammer Candles ###

@bot.command()
async def momohammer3W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Three-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Three-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Three-Week Doji Candles ###

@bot.command()
async def doji3W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data3W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Three Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Three-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Four-Week Tickers ###

@bot.command()
async def inside4W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Four-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Four-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Four-Week Tickers ###

@bot.command()
async def outside4W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Four-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Four-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Four-Week ####

@bot.command()
async def rev4W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Four-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Four-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Four-Week Tickers ###

@bot.command()
async def holygrail4W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Four-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Four-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Four-Week Tickers###
            
@bot.command()
async def nirvana4W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Four-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Four-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Four-Week ####

@bot.command()
async def doubleinside4W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Four-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Four-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Four-Week Tickers ###

@bot.command()
async def inrev4W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Four-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Four-Week Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Four-Week Tickers ###

@bot.command()
async def outrev4W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Four-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Four-Week Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Four-Week Shooter Candles ###

@bot.command()
async def shooter4W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Week Hammer Candles ###

@bot.command()
async def hammer4W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Week MoMo Hammer Candles ###

@bot.command()
async def momohammer4W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Week Doji Candles ###

@bot.command()
async def doji4W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Five-Week Tickers ###

@bot.command()
async def inside5W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Five-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Five-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Five-Week Tickers ###

@bot.command()
async def outside5W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Five-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Five-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Five-Week ####

@bot.command()
async def rev5W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Five-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Five-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Five-Week Tickers ###

@bot.command()
async def holygrail5W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Five-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Five-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Five-Week Tickers###
            
@bot.command()
async def nirvana5W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Five-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Five-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Five-Week ####

@bot.command()
async def doubleinside5W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Five-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Five-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Five-Week Tickers ###

@bot.command()
async def inrev5W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Five-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Five-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Five-Week Tickers ###

@bot.command()
async def outrev5W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Five-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Five-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Five-Week Shooter Candles ###

@bot.command()
async def shooter5W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Five-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Five-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Five-Week Hammer Candles ###

@bot.command()
async def hammer5W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Five-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Five-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Five-Week MoMo Hammer Candles ###

@bot.command()
async def momohammer5W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Five-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Five-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Five-Week Doji Candles ###

@bot.command()
async def doji5W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data5W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Five Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Five-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Six-Week Tickers ###

@bot.command()
async def inside6W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Six-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Six-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Six-Week Tickers ###

@bot.command()
async def outside6W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Six-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Six-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Six-Week ####

@bot.command()
async def rev6W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Six-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="2-2 Rev Six-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Six-Week Tickers ###

@bot.command()
async def holygrail6W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Six-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Six-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Six-Week Tickers###
            
@bot.command()
async def nirvana6W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Six-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Six-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Six-Week ####

@bot.command()
async def doubleinside6W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Six-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Six-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Six-Week Tickers ###

@bot.command()
async def inrev6W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Six-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Six-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Six-Week Tickers ###

@bot.command()
async def outrev6W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Six-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Six-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Six-Week Shooter Candles ###

@bot.command()
async def shooter6W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Six-Week Hammer Candles ###

@bot.command()
async def hammer6W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Six-Week MoMo Hammer ###

@bot.command()
async def momohammer6W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Six-Week Doji Candles ###

@bot.command()
async def doji6W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Seven-Week Tickers ###

@bot.command()
async def inside7W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Seven-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Seven-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Seven-Week Tickers ###

@bot.command()
async def outside7W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Seven-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Seven-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Seven-Week ####

@bot.command()
async def rev7W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Seven-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Seven-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Seven-Week Tickers ###

@bot.command()
async def holygrail7W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Seven-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Seven-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Seven-Week Tickers###
            
@bot.command()
async def nirvana7W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Seven-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Seven-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Seven-Week ####

@bot.command()
async def doubleinside7W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Seven-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Seven-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Seven Week Tickers ###

@bot.command()
async def inrev7W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Seven-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Seven-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Seven Week Tickers ###

@bot.command()
async def outrev7W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Seven-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Seven-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Seven-Week Shooter Candles ###

@bot.command()
async def shooter7W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Seven-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Seven-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Seven-Week Hammer Candles ###

@bot.command()
async def hammer7W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Seven-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Seven-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Seven-Week MoMo Hammer Candles ###

@bot.command()
async def momohammer7W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Seven-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Seven-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Seven-Week Doji Candles ###

@bot.command()
async def doji7W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data7W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Seven Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Seven-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Nine-Week Tickers ###

@bot.command()
async def inside9W (ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Nine-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Nine-Week Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Nine-Week Tickers ###

@bot.command()
async def outside9W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Nine-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Nine-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Nine-Week ####

@bot.command()
async def rev9W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Nine-Week Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Nine-Week Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Nine-Week Tickers ###

@bot.command()
async def holygrail9W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Nine-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Nine-Week Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Nine-Week Tickers###
            
@bot.command()
async def nirvana9W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Nine-Week Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Nine-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Nine-Week ####

@bot.command()
async def doubleinside9W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Nine-Week Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Nine-Week Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Nine-Week Tickers ###

@bot.command()
async def inrev9W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Nine-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Nine-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Nine-Week Tickers ###

@bot.command()
async def outrev9W(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Nine-Week Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Nine-Weeks Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Nine-Week Shooter Candles ###

@bot.command()
async def shooter9W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Nine-Week Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Nine-Week Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Nine-Week Hammer Candles ###

@bot.command()
async def hammer9W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Nine-Week Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Nine-Week Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Nine-Week MoMo Hammer Candles ###

@bot.command()
async def momohammer9W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Nine-Week MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Nine-Week MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Nine-Week Doji Candles ###

@bot.command()
async def doji9W(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data9W(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Nine Week Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Nine-Week Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Monthly Tickers ###

@bot.command()
async def insideM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Monthly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Monthly Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Monthly Tickers ###

@bot.command()
async def outsideM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Monthly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Monthly Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Monthly ####

@bot.command()
async def revM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Monthly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Monthly Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Monthly Tickers ###

@bot.command()
async def holygrailM(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Monthly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Monthly Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Monthly Tickers###
            
@bot.command()
async def nirvanaM(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Monthly Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Monthly Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Month ####

@bot.command()
async def doubleinsideM(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Monthly Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Monthly Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Monthly Tickers ###

@bot.command()
async def inrevM(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Monthly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Monthly Tickers ###

@bot.command()
async def outrevM(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Monthly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Monthly Shooter Candles ###

@bot.command()
async def shooterM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Monthly Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Monthly Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Monthly Hammer Candles ###

@bot.command()
async def hammerM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Monthly Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Monthly Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Monthly MoMo Hammer Candles ###

@bot.command()
async def momohammerM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Monthly MoMo Hammers Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Monthly MoMo Hammers Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Monthly Doji Candles ###

@bot.command()
async def dojiM(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataM(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Monthly Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Monthly Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

###############################################################################################################
#                                           Two Month Timeframe                                               #
###############################################################################################################

### Inside Two-Month Tickers ###

@bot.command()
async def inside2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Two-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Two-Month Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Two-Month Tickers ###

@bot.command()
async def outside2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Two-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Two-Month Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Two-Month ####

@bot.command()
async def rev2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Two-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Two-Month Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Two-Month Tickers ###

@bot.command()
async def holygrail2M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Two-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Two-Month Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Two-Month Tickers###
            
@bot.command()
async def nirvana2M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Two-Month Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Two-Month Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Month ####

@bot.command()
async def doubleinside2M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Two-Month Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Two-Month Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Two-Month Tickers ###

@bot.command()
async def inrev2M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Two-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Two-Month Tickers ###

@bot.command()
async def outrev2M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Two-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Two-Month Shooter Candles ###

@bot.command()
async def shooter2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Month Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Month Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Month Hammer Candles ###

@bot.command()
async def hammer2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Month Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Month Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Month MoMo Hammer Candles ###

@bot.command()
async def momohammer2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Month MoMo Hammers Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Month MoMo Hammers Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Two-Month Doji Candles ###

@bot.command()
async def doji2M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data2M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Two-Month Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Two-Month Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Inside Quarterly Tickers ###

@bot.command()
async def insideQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Quarterly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Quarterly Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Quarterly Tickers ###

@bot.command()
async def outsideQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Quarterly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Quarterly Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Quarterly ####

@bot.command()
async def revQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Quarterly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Quarterly Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Quarterly Tickers ###

@bot.command()
async def holygrailQ(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Quarterly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Quarterly Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Quarterly Tickers###
            
@bot.command()
async def nirvanaQ(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Quarterly Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Quarterly Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Quarter ####

@bot.command()
async def doubleinsideQ(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Quarterly Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Quarterly Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Quarterly Tickers ###

@bot.command()
async def inrevQ(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Quarterly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Quarters Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Quarterly Tickers ###

@bot.command()
async def outrevQ(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hgQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Quarterly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Quarters Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Quarterly Shooter Candles ###

@bot.command()
async def shooterQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Quarterly Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Quarterly Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Quarterly Hammer Candles ###

@bot.command()
async def hammerQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Quarterly Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Quarterly Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Quarterly MoMo Hammer Candles ###

@bot.command()
async def momohammerQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Quarterly MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Quarterly MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Quarterly Doji Candles ###

@bot.command()
async def dojiQ(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_dataQ(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Quarterly Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Quarterly Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

####################################################################################################################################
#                                                   FOUR MONTH TIME FRAME                                                          #
####################################################################################################################################

### Inside Four-Month Tickers ###

@bot.command()
async def inside4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Four-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Four-Month Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Four-Month Tickers ###

@bot.command()
async def outside4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Four-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Four-Month Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Four-Month ####

@bot.command()
async def rev4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Four-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Four-Month Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Four-Month Tickers ###

@bot.command()
async def holygrail4M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Four-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Four-Month Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Four-Month Tickers###
            
@bot.command()
async def nirvana4M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Four-Month Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Four-Month Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Four-Month ####

@bot.command()
async def doubleinside4M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Four-Month Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Four-Month Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Four-Month Tickers ###

@bot.command()
async def inrev4M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Four-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Four-Month Tickers ###

@bot.command()
async def outrev4M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Four-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Four-Month Shooter Candles ###

@bot.command()
async def shooter4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Month Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Month Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Month Hammer Candles ###

@bot.command()
async def hammer4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Month Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Month Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Month MoMo Hammer Candles ###

@bot.command()
async def momohammer4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Month MoMo Hammers Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Month MoMo Hammers Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Four-Month Doji Candles ###

@bot.command()
async def doji4M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data4M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Four-Month Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Four-Month Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

####################################################################################################################################
#                                                   SIX MONTH TIME FRAME                                                          #
####################################################################################################################################


### Inside Six-Month Tickers ###

@bot.command()
async def inside6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Six-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Six-Month Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Six-Month Tickers ###

@bot.command()
async def outside6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Six-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Six-Month Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Six-Month ####

@bot.command()
async def rev6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Six-Month Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Six-Month Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Six-Month Tickers ###

@bot.command()
async def holygrail6M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Six-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Six-Month Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Six-Month Tickers###
            
@bot.command()
async def nirvana6M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Six-Month Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Six-Month Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Six-Month ####

@bot.command()
async def doubleinside6M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Six-Month Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Six-Month Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Six-Month Tickers ###

@bot.command()
async def inrev6M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Six-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Six-Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Six-Month Tickers ###

@bot.command()
async def outrev6M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Six-Month Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Six-Months Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Six-Month Shooter Candles ###

@bot.command()
async def shooter6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Month Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Month Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Six-Month Hammer Candles ###

@bot.command()
async def hammer6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Month Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Month Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Six-Month MoMo Hammer Candles ###

@bot.command()
async def momohammer6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Month MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Month MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Six-Month Doji Candles ###

@bot.command()
async def doji6M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data6M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Six-Month Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Six-Month Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

@bot.command()
async def inside12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue

            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_inside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(inside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Inside Yearly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Inside Yearly Tickers", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Outside Yearly Tickers ###

@bot.command()
async def outside12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        outside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_outside(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                outside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

        def split_message(message, limit):
            lines = message.split('\n')
            messages = []
            current_message = ''
            for line in lines:
                if len(current_message) + len(line) <= limit:
                    current_message += line + '\n'
                else:
                    messages.append(current_message)
                    current_message = line + '\n'

            if current_message:
                messages.append(current_message)
                return messages

    long_message = '\n'.join(outside_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Outside Yearly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Outside Yearly Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

#### 2-2 Rev Yearly ####

@bot.command()
async def rev12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        failed2up_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_yesterday = data['results'][0]
            candle_today = data['results'][1]
            if is_22rev(candle_today, candle_yesterday):
                color_dot = str(green_emote) if candle_today['c'] > candle_today['o'] else str(red_emote)
                failed2up_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(failed2up_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="2-2 Rev Yearly Tickers", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No 2-2 Rev Yearly Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Holy Grail Yearly Tickers ###

@bot.command()
async def holygrail12M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_holygrail(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="Holy Grail Yearly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No Holy Grail Yearly Tickers Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

###Nirvana Yearly Tickers###
            
@bot.command()
async def nirvana12M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        nirvana_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_nirvana(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                nirvana_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if nirvana_tickers:
            embed = discord.Embed(title="Nirvana Yearly Tickers", description="\n".join(nirvana_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Nirvana Yearly Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

#### Double Inside Yearly ####

@bot.command()
async def doubleinside12M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        double_inside_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_doubleinside(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                double_inside_tickers.append(f"{ticker} {color_dot}")
                print(ticker)
        if double_inside_tickers:
            embed = discord.Embed(title=" Double Inside Yearly Tickers", description="\n".join(double_inside_tickers), color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)
        else:
            embed = discord.Embed(title="No Double Inside Yearly Tickers Were Detected", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)

### 1-2-2Rev Yearly Tickers ###

@bot.command()
async def inrev12M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_inside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="1-2-2Rev Yearly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 1-2-2Rev Yearlys Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### 3-2-2Rev Yearly Tickers ###

@bot.command()
async def outrev12M(CTX): 
    ### Sends Processing Message to user so user is informed command was recieved ###
    await CTX.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(CTX.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(CTX.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data_hg12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)
        holy_grail_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1 = data['results'][0]
            candle_2 = data['results'][1]
            candle_3 = data['results'][2]
            if is_outside_rev(candle_1, candle_2, candle_3):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                holy_grail_tickers.append(f"{ticker} {color_dot}")
                print(ticker)

    if holy_grail_tickers:
        embed = discord.Embed(title="3-2-2Rev Yearly Tickers", description="\n".join(holy_grail_tickers), color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")    
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)
    else:
        embed = discord.Embed(title="No 3-2-2Rev Yearlys Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await CTX.send(embed=embed)

### Yearly Shooter Candles ###

@bot.command()
async def shooter12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        shooter_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_shooter(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                shooter_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(shooter_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Yearly Shooter Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Yearly Shooter Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Yearly Hammer Candles ###

@bot.command()
async def hammer12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_hammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Yearly Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Yearly Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Yearly MoMo Hammer Candles ###

@bot.command()
async def momohammer12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        hammer_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][1]
            if is_MoMohammer(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                hammer_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(hammer_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Yearly MoMo Hammer Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Yearly MoMo Hammer Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

### Yearly Doji Candles ###

@bot.command()
async def doji12M(ctx):
    ### Sends Processing Message to user so user is informed command was recieved ###
    await ctx.send("Processing... Please wait.")
    ### Emotes for Open > Close or Open < Close ###
    red_emote = discord.utils.get(ctx.guild.emojis, name="redarrow")
    green_emote = discord.utils.get(ctx.guild.emojis, name="756335967106891826")
    ### List of Tickers to query ###
    tickers = ['A', 'AA', 'AAON', 'AAPL', 'ABBV', 'ABEV', 'ABNB', 'ABT', 'ACGL', 'ACI', 'ACM', 'ACN', 'ACWI', 'ADBE', 'ADI', 'ADM', 'ADP', 'ADSK', 'AEE', 'AEG', 'AEM','AEP', 'AER', 'AFG', 'AFL', 'AFRM', 'AGR', 'AIG', 'AIT', 'AIZ', 'AJG', 'AKAM', 'ALB', 'ALC', 'ALGN', 'ALL','ALLE', 'ALLY', 'ALNY', 'ALSN', 'AMAT', 'AMCR', 'AMD', 'AME', 'AMGN', 'AMH', 'AMP', 'AMT', 'AMX', 'AMZN', 'ANET', 'ANSS', 'AON', 'AOS', 'APD', 'APG', 'APH', 'APO', 'APP', 'APTV', 'AR', 'ARCC', 'ARE', 'ARES', 'ARGX', 'ARM', 'ARMK', 'ASML', 'ASX', 'ATO','ATR', 'AU', 'AUR', 'AVB', 'AVGO', 'AVTR', 'AVY', 'AWK', 'AXON', 'AXP', 'AZN','AZO','AZPN', 'BA','BABA', 'BAC','BAH', 'BALL', 'BAM', 'BAP', 'BAX', 'BBD', 'BBVA', 'BBY', 'BCE', 'BCH', 'BCS', 'BDX', 'BEKE', 'BEN', 'BEP', 'BEPC', 'BF.A', 'BG', 'BGNE', 'BHP', 'BIDU', 'BIIB', 'BIP', 'BITB', 'BITO', 'BJ', 'BK', 'BKNG', 'BKR', 'BLD', 'BLDR', 'BLK', 'BMO', 'BMRN', 'BMY', 'BN', 'BNO', 'BNS', 'BNT', 'BNTX', 'BP', 'BR', 'BRBR', 'BRK.B', 'BRO', 'BSBR', 'BSX', 'BSY', 'BTC', 'BTI', 'BUD', 'BURL', 'BWXT', 'BX', 'BXP', 'C', 'CACI', 'CAG', 'CAH', 'CARR', 'CART', 'CASY', 'CAT', 'CAVA', 'CB', 'CBOE', 'CBRE', 'CCEP', 'CCI', 'CCJ', 'CCK', 'CCL', 'CDNS', 'CDW', 'CEG', 'CF', 'CFG', 'CFLT', 'CG', 'CHD', 'CHDN', 'CHKP', 'CHRW', 'CHT', 'CHTR', 'CHWY', 'CI', 'CIEN', 'CINF', 'CL', 'CLH', 'CLS', 'CLX', 'CM', 'CMCSA', 'CME', 'CMG', 'CMI', 'CMS', 'CNA', 'CNC', 'CNH', 'CNI', 'CNP', 'CNQ', 'COF', 'COHR', 'COIN', 'COKE', 'COO', 'COP', 'COR', 'CORN', 'COST', 'CP', 'CPAY', 'CPB', 'CPNG', 'CPRT', 'CPT', 'CQP', 'CR', 'CRBG', 'CRH', 'CRL', 'CRM', 'CRWD', 'CSCO', 'CSGP', 'CSL', 'CSX', 'CTAS', 'CTLT', 'CTRA', 'CTSH', 'CTVA', 'CUBE', 'CVE', 'CVNA', 'CVS', 'CVX', 'CW', 'CYBR', 'D','DAL', 'DASH', 'DAY', 'DB', 'DBA', 'DBB', 'DBC', 'DBE', 'DBO', 'DD', 'DDOG', 'DE', 'DECK', 'DELL', 'DEO', 'DFS', 'DG', 'DGX', 'DHI', 'DHR', 'DIA', 'DIS', 'DKNG', 'DKS', 'DLR', 'DLTR', 'DOC', 'DOCU', 'DOV', 'DOW', 'DPZ', 'DRI', 'DT', 'DTE', 'DTM', 'DUK', 'DUOL', 'DVA', 'DVN', 'DXCM', 'DXJ', 'E','EA', 'EBAY', 'EBR', 'EC', 'ECL', 'ED', 'EDC', 'EDR', 'EEM', 'EFA', 'EFX', 'EG', 'EHC', 'EIX', 'EL', 'ELS', 'ELV', 'EME', 'EMN', 'EMR', 'ENB', 'ENTG', 'EOG', 'EPAM', 'EPD', 'EPI', 'EQH', 'EQIX', 'EQNR', 'EQR', 'EQT', 'ERIC', 'ERIE', 'ES', 'ESLT', 'ESS', 'ESTC', 'ET', 'ETN', 'ETR', 'EVR', 'EVRG', 'EW', 'EWA', 'EWBC', 'EWC', 'EWG', 'EWH', 'EWI', 'EWJ', 'EWL', 'EWM', 'EWP', 'EWS', 'EWT', 'EWU', 'EWW', 'EWY', 'EWZ', 'EXC', 'EXE', 'EXEL', 'EXP', 'EXPD', 'EXPE', 'EXR', 'EZA', 'F', 'FANG', 'FAST', 'FBTC', 'FCNCA', 'FCNCO', 'FCX', 'FDS', 'FDX', 'FE', 'FER', 'FERG', 'FEZ', 'FFIV', 'FHN', 'FI', 'FICO', 'FIS', 'FITB', 'FIX', 'FLEX', 'FLUT', 'FMS', 'FMX', 'FND', 'FNF', 'FNV', 'FOXA', 'FSLR', 'FTAI', 'FTI', 'FTNT', 'FTS', 'FTV', 'FUTU', 'FWONA', 'FWONK', 'FXI', 'GBTC', 'GD', 'GDDY', 'GDX', 'GDXJ', 'GE', 'GEHC', 'GEN', 'GEV', 'GFI', 'GFL', 'GFS', 'GGG', 'GIB', 'GILD', 'GIS', 'GLD', 'GLPI', 'GLW', 'GM', 'GMAB', 'GME', 'GMED', 'GNRC', 'GOLD', 'GOOGL', 'GPC', 'GPN', 'GRAB', 'GRMN', 'GS', 'GSG', 'GSK', 'GTLB', 'GWRE', 'GWW', 'H', 'HAL', 'HBAN', 'HCA', 'HD', 'HDB', 'HEI', 'HEI.A', 'HES', 'HIG', 'HLI', 'HLN', 'HLNE', 'HLT', 'HMC', 'HOLX', 'HON', 'HOOD', 'HPE', 'HPQ', 'HRL', 'HSBC', 'HST', 'HSY', 'HTHT', 'HUBB', 'HUBS', 'HUM', 'HWM', 'IAU', 'IBB', 'IBIT', 'IBKR', 'IBM', 'IBN', 'ICE', 'ICLR', 'IDX', 'IDXX', 'IEMG', 'IEX', 'IFF', 'IHG', 'IJH', 'IJR', 'ILMN', 'IMO',  'INCY', 'INFY', 'ING', 'INSM', 'INTC','INTU', 'INVH', 'IOT', 'IP', 'IPG', 'IQV', 'IR', 'IRM', 'ISRG', 'IT', 'ITB', 'ITT', 'ITUB', 'ITW', 'IVV', 'IWD', 'IWF', 'IWM', 'IWN', 'IWO', 'IX', 'IYE', 'IYR', 'J', 'JBHT', 'JBL', 'JCI', 'JD', 'JEF', 'JHX', 'JKHY', 'JLL', 'JNJ', 'JNPR', 'JPM', 'K', 'KB', 'KBE', 'KDP', 'KEP', 'KEY', 'KEYS', 'KGC', 'KHC', 'KIM', 'KKR', 'KLAC', 'KMB', 'KMI', 'KMX', 'KNSL', 'KO', 'KOF', 'KR', 'KRE', 'KSPI', 'KVUE', 'L','LAD', 'LAMR', 'LBRDK', 'LDOS', 'LECO', 'LEN', 'LH', 'LHX', 'LI', 'LII', 'LIN', 'LINE', 'LKQ', 'LLY', 'LMT', 'LNG', 'LNT', 'LOGI', 'LOW', 'LPLA', 'LRCX', 'LULU', 'LUV', 'LVS', 'LW', 'LYB', 'LYG', 'LYV', 'MA','MAA', 'MANH', 'MAR', 'MAS', 'MBLY', 'MCD', 'MCHP', 'MCK', 'MCO', 'MDB', 'MDLZ', 'MDT', 'MDY', 'MEDP', 'MELI', 'MET', 'META', 'MFC', 'MFG', 'MGA', 'MGM', 'MKC', 'MKC.V', 'MKL', 'MLM', 'MMC', 'MMM', 'MMYT', 'MNDY', 'MNST', 'MO', 'MOH','MORN', 'MPC', 'MPLX', 'MPWR', 'MRK', 'MRNA', 'MRVL', 'MS', 'MSCI', 'MSFT', 'MSI', 'MSTR', 'MT', 'MTB', 'MTD', 'MTZ','MU', 'MUFG', 'MUSA', 'NBIX', 'NCLH', 'NDAQ', 'NDSN', 'NEE', 'NEM', 'NET', 'NFLX', 'NGG', 'NI', 'NICE', 'NIO','NKE', 'NLY', 'NMR', 'NOC', 'NOK', 'NOW', 'NRG', 'NSC', 'NTAP', 'NTES', 'NTNX', 'NTR', 'NTRA', 'NTRS', 'NU', 'NUE', 'NVDA', 'NVO', 'NVR', 'NVS', 'NVT', 'NWG', 'NWSA', 'NXPI', 'O', 'OC', 'ODFL', 'OEF', 'OHI', 'OIH', 'OKE', 'OKTA', 'OMC', 'ON', 'ONON', 'ORCL', 'ORLY', 'OTIS', 'OVV', 'OWL', 'OXY', 'PAA', 'PAG', 'PALL', 'PANW', 'PAYC', 'PAYX', 'PBA', 'PBR', 'PBR.A', 'PCAR', 'PCG', 'PCOR', 'PCTY', 'PCVX', 'PDD', 'PEG', 'PEP', 'PFE', 'PFF', 'PFG', 'PFGC', 'PG', 'PGR', 'PH', 'PHG', 'PHM', 'PIN', 'PINS', 'PKG', 'PKX', 'PLD', 'PLTR', 'PM', 'PNC', 'PNR', 'PNW', 'PODD', 'POOL', 'PPC', 'PPG', 'PPL', 'PPLT', 'PR', 'PRI', 'PRMB', 'PRU', 'PSA', 'PSN', 'PSO', 'PSTG', 'PSX', 'PTC', 'PUK', 'PWR', 'PYPL', 'QCOM', 'QQQ', 'QSR', 'RACE', 'RBA', 'RBC', 'RBLX', 'RCI', 'RCL', 'RDDT', 'RDY', 'REG', 'REGN', 'RELX', 'RF', 'RGA', 'RIO', 'RIVN', 'RJF', 'RKLB', 'RKT', 'RL', 'RMD', 'RNR', 'ROK', 'ROKU', 'ROL', 'ROP', 'ROST', 'RPM', 'RPRX', 'RRX', 'RS', 'RSG', 'RTO', 'RTX','RVTY','RY', 'RYAAY', 'RYAN', 'SAIA', 'SAN', 'SAP', 'SBAC', 'SBS', 'SBUX', 'SCCO', 'SCHW', 'SCI', 'SE', 'SEIC', 'SF', 'SFM', 'SGOL', 'SHEL', 'SHG', 'SHOP', 'SHW', 'SIVR', 'SJM', 'SLB', 'SLF', 'SLV','SMCI', 'SMFG', 'SMH', 'SMMT', 'SN', 'SNA', 'SNAP', 'SNN','SNOW','SNPS', 'SNX', 'SNY', 'SO','SOFI', 'SOLV', 'SONY', 'SPG', 'SPGI', 'SPOT', 'SPY', 'SQ', 'SQM','SQQQ', 'SRE', 'SRPT', 'SSNC', 'SSO','STE', 'STLA', 'STLD', 'STM', 'STT', 'STX', 'STZ', 'SU','SUI', 'SUZ', 'SVXY', 'SW', 'SWK', 'SWKS', 'SYF', 'SYK', 'SYM', 'SYY', 'T', 'TAK', 'TAP', 'TAP.A', 'TCOM', 'TD', 'TDG', 'TDY', 'TEAM', 'TECH', 'TECK', 'TEF', 'TEL', 'TER', 'TEVA', 'TFC', 'TFII', 'TGT', 'THC', 'TJX', 'TKO', 'TLK', 'TLN', 'TLT', 'TM', 'TME', 'TMO', 'TMUS', 'TOL', 'TOST', 'TPG', 'TPL', 'TPR', 'TQQQ', 'TRGP', 'TRI', 'TRMB', 'TROW', 'TRP', 'TRU', 'TRV', 'TS', 'TSCO', 'TSLA', 'TSM', 'TSN', 'TT', 'TTD', 'TTE', 'TTEK', 'TTWO', 'TU', 'TW', 'TWLO', 'TXN', 'TXRH','TXT', 'TYL', 'UAL', 'UBER', 'UBS', 'UDR', 'UGA', 'UHAL', 'UHAL.B', 'UHS', 'UI', 'UL', 'ULS', 'ULTA', 'UMC', 'UNG', 'UNH', 'UNM', 'UNP', 'UPS', 'URA', 'URI', 'USB', 'USCI', 'USFD', 'USO', 'UTHR', 'UVXY', 'V', 'VALE', 'VEEV', 'VICI', 'VIK', 'VIV', 'VIXY', 'VLO', 'VLTO', 'VMC', 'VNOM', 'VNQ', 'VOD', 'VOO', 'VRSK', 'VRSN', 'VRT', 'VRTX', 'VST', 'VTI', 'VTR', 'VTRS', 'VZ', 'WAB','WAL', 'WAT', 'WBD', 'WBS', 'WCC', 'WCN', 'WDAY', 'WDC', 'WDS', 'WEC', 'WELL', 'WES', 'WFC', 'WIT', 'WIX', 'WLK', 'WM', 'WMB', 'WMG', 'WMS', 'WMT', 'WPC', 'WPM', 'WPP', 'WRB', 'WSM', 'WSO', 'WST', 'WTRG', 'WTW', 'WWD', 'WY', 'XEL', 'XHB', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV', 'XLY', 'XME', 'XOM', 'XOP', 'XPEV', 'XPO', 'XRT', 'XTL', 'XYL', 'YPF', 'YUM', 'YUMC', 'Z', 'ZBH', 'ZBRA', 'ZM', 'ZS', 'ZTO', 'ZTS']    
    async with aiohttp.ClientSession() as session:
        tasks = [fetch_stock_data12M(session, ticker) for ticker in tickers]
        stock_data_responses = await asyncio.gather(*tasks)

        Doji_tickers = []
        for ticker, data in zip(tickers, stock_data_responses):
            if 'results' not in data:
                print(f"Data for {ticker} is missing 'results' key.")
                continue
            candle_1= data['results'][0]
            if is_doji(candle_1):
                color_dot = str(green_emote) if candle_1['c'] > candle_1['o'] else str(red_emote)
                Doji_tickers.append(f"{ticker} {color_dot}")
                #print(ticker)

    def split_message(message, limit):
        lines = message.split('\n')
        messages = []
        current_message = ''
        for line in lines:
            if len(current_message) + len(line) <= limit:
                current_message += line + '\n'
            else:
                messages.append(current_message)
                current_message = line + '\n'

        if current_message:
            messages.append(current_message)

        return messages

    long_message = '\n'.join(Doji_tickers)  # This is the message that exceeds Discord's limit
    chunks = split_message(long_message, 4096)  # Split the message into chunks of 4096 characters
    if chunks:
        for chunk in chunks:
            if chunk.strip():
                embed = discord.Embed(title="Yearly Doji Candles", description=chunk, color=0xFFEA00)
                
                embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
                embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")      
                await ctx.send(embed=embed)
    else:
        embed = discord.Embed(title="No Yearly Doji Tickers Were Detected", color=0xFFEA00)
        
        embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
        embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
        await ctx.send(embed=embed)

@bot.command(name='commandlist')
async def commandlist(CTX): 
            embed = discord.Embed(title="Command List:", description="\n Bot prefix is = !\n\n Below is a list of commands that the bot will respond to: \n\npoD \npo2D \npoW \npo2W \npoM \npoQ \n\ninsideD \ninside2D \ninside4D \ninsideW \ninside2W \ninside3W \ninside6W \ninside7W \ninside9W \ninsideM \ninside2M \ninside4M \ninside6M \ninsideQ \n \noutsideD \noutside2D \noutside4D \noutsideW \noutside2W \noutside3W \noutside6W \noutside7W \noutside9W \noutsideM \noutside2M \noutside4M \noutside6M \noutsideQ \n\nrevD \nrev2D \nrev4D \nrevW \nrev2W \nrev3W \nrev6W \nrev7W \nrev9W \nrevM \nrev2M \nrev4M \nrev6M \nrevQ \n\n \ninrevD \ninrev2D \ninrev4D \ninrevW \ninrev2W \ninrev3W \ninrev4W \ninrev5W \ninrev6W \ninrev7W \ninrev9W \ninrevM \ninrev2M \ninrev4M \ninrev6M \ninrevQ \n\n \noutrevD \noutrev2D \noutrev4D \noutrevW \noutrev2W \noutrev3W \noutrev4W \noutrev5W \noutrev6W \noutrev7W \noutrev9W \noutrevM \noutrev2M \noutrev4M \noutrev6M \noutrevQ \n\nholygrailD \nholygrail2D \nholygrail4D \nholygrailW \nholygrail2W \nholygrail3W \nholygrail6W \nholygrail7W \nholygrail9W \nholygrailM \nholygrail2M \nholygrail4M \nholygrail6M \nholygrailQ \n\nnirvanaD \nnirvana2D \nnirvana4D \nnirvanaW \nnirvana2W \nnirvana3W  \nnirvana6W \nnirvana7W \nnirvana9W \nnirvanaM \nnirvana2M \nnirvana4M \nnirvana6M \nnirvanaQ \n\ndoubleinsideD \ndoubleinside2D  \ndoubleinside4D  \ndoubleinsideW \ndoubleinside2W \ndoubleinside3W \ndoubleinside6W \ndoubleinside7W \ndoubleinside9W \ndoubleinsideM \ndoubleinside2M \ndoubleinside4M \ndoubleinside6M \ndoubleinsideQ \n\nhammerD \nhammer2D \nhammer4D \nhammerW \nhammer2W \nhammer3W \nhammer6W \nhammer7W \nhammer9W \nhammerM \nhammer2M \nhammer4M \nhammer6M \nhammerQ \n\nshooterD \nshooter2D \nshhoter4D \nshooterW \nshooter2W \nshooter3W \nshooter6W \nshooter7W \nshooter9W \nshooterM \nshooter2M \nshooter4M \nshooter6M \nshooterQ \n\ndojiD \ndoji2D \ndoji4D \ndojiW \ndoji2W \ndoji3W \ndoji6W \ndoji7W \ndoji9W \ndojiM \ndoji2M \ndoji4M \ndoji6M \ndojiQ", color=0xFFEA00)
            
            embed.set_thumbnail(url="https://images.squarespace-cdn.com/content/v1/61627421808d18346b73a59a/1634771716943-6I4A53LBJ5YI5A1D6FIA/Adex+Trades+Logo+Long.jpg")
            embed.set_footer(icon_url="https://yt3.googleusercontent.com/9rB5TtR3DcGfXC5dJbhmc1nPIPaOeZl33viPEWBn-MjbqCFAOzW18DhcqQnD_r8YHCVAzOgePA=s176-c-k-c0x00ffffff-no-rj" ,text="© 2024, AdexTrades LLC | Not a Financial Advisor | #Playbothsides")
            await CTX.send(embed=embed)        

bot.run(token)